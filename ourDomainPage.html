<!DOCTYPE html>
<html dir="ltr" lang='en' class="cui">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="UTF-8" />
    <style>
        :root{
            --genislik:50%;
            box-sizing: border-box;
        }
        #iFrame{
            width: var(--genislik);
            box-sizing: border-box;
        }
        #secretCalculationDiv{
            width: var(--genislik);
            top:-1000px;
            padding:0;
        }
        /* -----------------------------------------------*/

    </style>
    <script>

        let iFrameSizePredictor = (theTarget)=>{
            let targetSourceCode = fetch(theTarget).then(response => response.text()).then(txt=>{
                const domparser = new DOMParser();
                // console.log(txt);
                const doc = domparser.parseFromString(txt, 'text/html');
                //
                let secretDiv = document.createElement('div');
                secretDiv.id = 'secretCalculationDiv';


                //console.log(doc.body.children);
                Object.values(doc.body.children).forEach(theChild=>{
                    //console.log(theChild)
                    secretDiv.append(theChild)
                })



                secretDiv.style.cssText = 'position:absolute; left: -955px; top:-156px';
                //secretDiv.classList=['cui'];
                document.body.append(secretDiv);
                let childrenOfSecretDiv =  secretDiv.children;
                let cumulHeight = 0;
                Object.values(childrenOfSecretDiv).forEach(item=>{
                    let GCS = getComputedStyle(item);
                    let GBC = item.getBoundingClientRect();
                    let cleanComputedHeight = measureCleaner(getComputedStyle(item).height);
                    let cleanComputedVerticalPaddings= measureCleaner(getComputedStyle(item).paddingTop) + measureCleaner(getComputedStyle(item).paddingBottom);
                    let cleanComputedVerticalMargins = measureCleaner(getComputedStyle(item).marginTop) + measureCleaner(getComputedStyle(item).marginBottom);
                    let totalCleanComputedHeight = cleanComputedHeight+cleanComputedVerticalMargins+cleanComputedVerticalPaddings;
                    console.log(`
                    item tag: ${item.tagName}
                    item GBC height (margins not included, padding included): ${GBC.height}
                    item height: ${totalCleanComputedHeight}
                    item margins: ${cleanComputedVerticalMargins}
                    item margins: ${cleanComputedVerticalPaddings}

                    `)

                    console.log(`Total Clean Height of this item: ${totalCleanComputedHeight}`);

                    cumulHeight+=totalCleanComputedHeight;

                })
                //console.log(`Toplam yukseklik: ${cumulHeight}`);
                document.querySelector('#iFrame').style.height=cumulHeight+'px';
                //document.querySelector('#iFrame').style.height=1700+'px';

                console.log(document.querySelector('#iFrame').scrollHeight);


                function measureCleaner(whatMeasure){
                    let cleanComputed = parseInt(whatMeasure);
                    return isNaN(cleanComputed)?0:cleanComputed;
                }

            })
        }

    </script>
</head>
<body>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus, vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus, vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus,
    vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>

<iframe id="iFrame" src="./foreignDomainPage.html" onload="iFrameSizePredictor(this.src)" style="border:0; padding:0; margin:0;">
    before loading...
</iframe>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus, vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus, vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. In tristique felis vel viverra vulputate. Integer tincidunt, justo ut aliquet aliquam, nisl tellus molestie justo, nec elementum ligula nulla ullamcorper metus. Donec nec rhoncus risus, vel sodales neque. Nulla nulla metus, pharetra vitae massa vitae, mollis pretium eros. In hac habitasse platea dictumst. Mauris sollicitudin consectetur lorem, quis efficitur ipsum consectetur sit amet. Nunc tellus leo, imperdiet a scelerisque eget, bibendum a felis. Integer luctus venenatis est nec ornare. Nunc ullamcorper commodo turpis, in sagittis felis semper a.</p>


</body>
</html>
